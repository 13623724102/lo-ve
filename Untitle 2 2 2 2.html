
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>ç»™æå­ç¥çš„å°æƒ…ä¹¦</title>
  <style>
    :root {
      --bg1: #ffdde1;
      --bg2: #ee9ca7;
      --card: #ffffffee;
      --txt: #2b2b2b;
      --accent: #ff4d6d;
      --accent-dark: #c81d3c;
    }
    html, body { height:100%; margin:0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, "PingFang SC", "Microsoft YaHei", sans-serif;
      background: radial-gradient(1200px 800px at 70% -10%, var(--bg1), transparent 60%),
                  linear-gradient(135deg, var(--bg2), var(--bg1));
      color: var(--txt);
      overflow: hidden;
    }
    .hearts { position: fixed; inset:0; pointer-events:none; z-index:0; overflow:hidden; }
    .heart {
      position:absolute;
      width:18px; height:18px;
      background: var(--accent);
      transform: rotate(45deg);
      animation: floatUp 6s linear infinite;
      opacity: 0.75;
    }
    .heart::before, .heart::after {
      content:""; position:absolute;
      width:18px; height:18px;
      background: var(--accent); border-radius:50%;
    }
    .heart::before { left:-9px; }
    .heart::after { top:-9px; }

    @keyframes floatUp {
      0% { transform: translateY(100vh) rotate(45deg); opacity:0; }
      100% { transform: translateY(-15vh) rotate(45deg); opacity:0; }
    }
    .wrap { position:relative; z-index:2; height:100%; display:flex; justify-content:center; align-items:center; padding:20px; }
    .card {
      width: min(720px, 90vw);
      background: var(--card);
      border-radius: 24px;
      padding: 28px;
      box-shadow: 0 20px 60px rgba(0,0,0,.15);
      backdrop-filter: blur(6px);
      text-align: center;
    }
    .title { font-size: clamp(26px,5vw,36px); font-weight:800; margin-bottom:16px; }
    .subtitle { font-size: clamp(14px,3.2vw,16px); color:#555; margin-bottom:14px; }
    .type { font-size: clamp(18px,4.2vw,22px); line-height:1.7; white-space:pre-wrap; min-height:6em; }
    .cursor { display:inline-block; width:.9ch; border-right:2px solid var(--accent); animation:blink 1s steps(1) infinite; }
    @keyframes blink { 50% { border-color: transparent; } }
    .hint { font-size:12px; color:#666; margin-top:10px; }
    #confetti { position: fixed; inset:0; pointer-events:none; z-index:1; }
  </style>
</head>
<body>
  <canvas id="confetti"></canvas>
  <div class="hearts" id="hearts"></div>
  <div class="wrap">
    <div class="card">
      <div class="title">ç»™ <span id="name">æå­ç¥</span> çš„å°æƒ…ä¹¦</div>
      <div class="subtitle">ğŸ’Œ è¿™æ˜¯ç»™ä½ çš„çœŸå¿ƒè¯</div>
      <div class="type" id="typewriter"></div><div class="cursor" id="cursor"></div>
      <div class="hint">éŸ³ä¹å·²ä¸ºä½ è‡ªåŠ¨æ’­æ”¾ ğŸµ</div>
    </div>
  </div>

  <!-- è‡ªåŠ¨æ’­æ”¾éŸ³ä¹ -->
  <audio id="bgm" preload="auto" loop>
    <source src="https://cdn.jsdelivr.net/gh/13623724102/lo-ve@main/love.mp3" type="audio/mpeg">
  </audio>

  <script>
    const RECEIVER_NAME = "æå­ç¥";
    const SENDER_NAME = "è£å¥¥æ·‡";
    const MESSAGES = [
      "å­ç¥ï¼š",
      "é‡è§ä½ ï¼Œæ˜¯æˆ‘æœ€ç¾çš„æ„å¤–ã€‚",
      "æˆ‘å–œæ¬¢ä½ ç¬‘çš„æ ·å­ï¼Œä¹Ÿæƒ³å’Œä½ çœ‹å¾ˆå¤šå¾ˆå¤šçš„æ—¥å‡ºå’Œæ—¥è½ã€‚",
      "å¦‚æœå¯ä»¥ï¼Œæˆ‘æƒ³æŠŠæ¥ä¸‹æ¥çš„æ¯ä¸€å¤©ï¼Œéƒ½ç”¨æ¥å¯¹ä½ å¥½ã€‚",
      "ä½ æ„¿æ„è®©æˆ‘ä¸€ç›´ç‰µç€ä½ èµ°ä¸‹å»å—ï¼Ÿ"
    ];
    document.getElementById("name").textContent = RECEIVER_NAME;

    // â¤ï¸ é£˜åŠ¨åŠ¨ç”»
    const heartsContainer = document.getElementById("hearts");
    setInterval(() => {
      const h = document.createElement("div");
      h.className = "heart";
      h.style.left = Math.random() * 100 + "vw";
      heartsContainer.appendChild(h);
      setTimeout(() => h.remove(), 6000);
    }, 300);

    // âŒ¨ æ‰“å­—æœºæ•ˆæœ
    const el = document.getElementById("typewriter");
    const cursor = document.getElementById("cursor");

    async function typeMessages(){
      el.textContent = "";
      for (let i = 0; i < MESSAGES.length; i++) {
        const text = MESSAGES[i] + (i < MESSAGES.length - 1 ? "\n\n" : "\n\nâ€”â€” " + SENDER_NAME);
        await typeText(text);
        await new Promise(r => setTimeout(r, 400));
      }
    }

    async function typeText(text) {
      for (const ch of text) {
        el.textContent += ch;
        await new Promise(r => setTimeout(r, ch === "\n" ? 20 : 25 + Math.random() * 35));
      }
    }

    setTimeout(typeMessages, 500);

    // ğŸµ è‡ªåŠ¨æ’­æ”¾éŸ³ä¹
    const bgm = document.getElementById("bgm");
    document.addEventListener("DOMContentLoaded", () => {
      const playMusic = () => {
        bgm.play().catch(() => {
          // å¦‚æœæµè§ˆå™¨æ‹¦æˆªï¼Œå°±åœ¨ç¬¬ä¸€æ¬¡è§¦æ‘¸æ—¶æ’­æ”¾
          document.body.addEventListener("touchstart", () => {
            bgm.play().catch(()=>{});
          }, { once: true });
        });
      };
      // iOS éœ€è¦å…ˆé™éŸ³æ‰èƒ½è‡ªå¯
      bgm.muted = true;
      bgm.play().then(() => {
        bgm.muted = false;
      }).catch(playMusic);
    });

    // ğŸ‰ äº”å½©çº¸å±‘ï¼ˆå¯åŠ æ•ˆæœï¼‰
    const canvas = document.getElementById("confetti");
    const ctx = canvas.getContext("2d");
    const DPR = Math.min(2, devicePixelRatio || 1);
    function resizeCanvas() {
      canvas.width = innerWidth * DPR;
      canvas.height = innerHeight * DPR;
      canvas.style.width = innerWidth + "px";
      canvas.style.height = innerHeight + "px";
    }
    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();
  </script>
</body>
</html>